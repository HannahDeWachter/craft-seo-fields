{# @var craft \craft\web\twig\variables\CraftVariable #}
{% extends 'seo-fields/_includes/_header' %}
{% import "_includes/forms" as forms %}

{% set selectedSubnavItem = 'sitemap' %}
{% set title = 'Sitemap.xml' %}

{% block contextMenu %}
    {% if selectedSubnavItem == 'defaults' or sitemapPerSite %}
        {% include 'seo-fields/_includes/_sites' %}
    {% endif %}
{% endblock %}


{% block content %}
    {{ actionInput('seo-fields/sitemap/save') }}
    {% if data.id is defined %}
        {{ forms.hidden({
            name: 'id',
            value: data.id
        }) }}
    {% endif %}

    <div class="field">
        <div class="heading">
            <h2>What is a sitemap?</h2>
            <div class="instructions">
                A sitemap is a file where you provide information about the pages, videos, and other files on your site,
                and the relationships between them. Search engines like Google read this file to more intelligently
                crawl your site. A sitemap tells the crawler which files you think are important in your site, and also
                provides valuable information about these files: for example, for pages, when the page was last updated,
                how often the page is changed, and any alternate language versions of a page.
            </div>
        </div>
    </div>
    <div class="field">
        <div class="heading">
            <h2>Sections</h2>
        </div>
    </div>
    <table class="data fullwidth collapsible">
        <thead>
        <tr>
            <th>Section</th>
            <th>Update frequency
                <span class="info">
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
                    </span>
            </th>
            <th>Priority
                <span class="info">
                        The priority of this URL relative to other URLs on your site. Valid values range from 0.0 to 1.0. This value does not affect how your pages are compared to pages on other sitesâ€”it only lets the search engines know which pages you deem most important for the crawlers.
                    </span>
            </th>
            <th>
                Enabled?
            </th>
        </tr>
        </thead>
        <tbody>
        {% for section in craft.app.sections.getAllSections() %}
            {% set settings = attribute(data.sitemap|json_decode, section.id) ?? []  %}
            <tr>
                <th>
                    {{ section.name }}
                </th>
                <td>
                    <div class="field">
                        <div class="input ltr">
                            <div class="select">
                                <select name="data[{{ section.id }}][changefreq]" id="">
                                    <option value="always" {% if settings|length and settings.changefreq == 'always' %}selected{% endif %}>always</option>
                                    <option value="hourly" {% if settings|length and settings.changefreq == 'hourly' %}selected{% endif %}>hourly</option>
                                    <option value="daily" {% if settings|length and settings.changefreq == 'daily' %}selected{% endif %}>daily</option>
                                    <option value="weekly" {% if settings|length and settings.changefreq == 'weekly' %}selected{% endif %}>weekly</option>
                                    <option value="monthly" {% if settings|length and settings.changefreq == 'monthly' %}selected{% endif %}>monthly</option>
                                    <option value="yearly" {% if settings|length and settings.changefreq == 'yearly' %}selected{% endif %}>yearly</option>
                                    <option value="never" {% if settings|length and settings.changefreq == 'never' %}selected{% endif %}>never</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <div class="field">
                        <div class="input ltr">
                            <div class="select">
                                <select name="data[{{ section.id }}][priority]">
                                    <option value="1.0" {% if settings|length and settings.priority == '1.0' %}selected{% endif %}>1.0 (High)</option>
                                    <option value="0.9" {% if settings|length and settings.priority == '0.9' %}selected{% endif %}>0.9</option>
                                    <option value="0.8" {% if settings|length and settings.priority == '0.8' %}selected{% endif %}>0.8</option>
                                    <option value="0.7" {% if settings|length and settings.priority == '0.7' %}selected{% endif %}>0.7</option>
                                    <option value="0.6" {% if settings|length and settings.priority == '0.6' %}selected{% endif %}>0.6</option>
                                    <option value="0.5" {% if settings|length and settings.priority == '0.5' %}selected{% endif %} selected="">0.5 (Default)</option>
                                    <option value="0.4" {% if settings|length and settings.priority == '0.4' %}selected{% endif %}>0.4</option>
                                    <option value="0.3" {% if settings|length and settings.priority == '0.3' %}selected{% endif %}>0.3</option>
                                    <option value="0.2" {% if settings|length and settings.priority == '0.2' %}selected{% endif %}>0.2</option>
                                    <option value="0.1" {% if settings|length and settings.priority == '0.1' %}selected{% endif %}>0.1</option>
                                    <option value="0.0" {% if settings|length and settings.priority == '0.0' %}selected{% endif %}>0.0 (Low)</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </td>
                <td>
                    <label for="{{ section.id }}-enabled">
                        <input type="checkbox" id="{{ section.id }}-enabled" name="data[{{ section.id }}][enabled]" {% if settings.enabled is defined %}checked{% endif %}>
                        Enabled?
                    </label>
                </td>
            </tr>
        {% endfor %}
        </tbody>
    </table>

{% endblock %}