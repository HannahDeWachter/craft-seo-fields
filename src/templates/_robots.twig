{# @var craft \craft\web\twig\variables\CraftVariable #}
{% extends 'seo-fields/_includes/_header' %}
{% import "_includes/forms" as forms %}

{% do view.registerAssetBundle("studioespresso\\seofields\\assetbundles\\robots\\RobotsAssets") %}

{% set selectedSubnavItem = 'robots' %}
{% set title = 'Robots.txt' %}

{% block contextMenu %}
    {% if selectedSubnavItem == 'defaults' or robotsPerSite %}
        {% include 'seo-fields/_includes/_sites' %}
    {% endif %}
{% endblock %}

{% block content %}
    {% if robotsPerSite %}
        <input type="hidden" name="siteId" value="{{ currentSite.id }}">
    {% endif %}
    
    {{ actionInput('seo-fields/robots/save') }}
    {% if data.id is defined %}
        {{ forms.hidden({
            name: 'id',
            value: data.id
        }) }}
    {% endif %}

    {{ forms.lightswitchField({
        label: 'Enable robots.txt'|t('seo-fields'),
        instructions: 'Let the plugin handle your robots.txt'|t('seo-fields'),
        id: 'enableRobots',
        name: 'enableRobots',
        value: 1,
        on: data.enableRobots is not null ? data.enableRobots,
    }) }}
    
    <textarea name="robots" id="robots" cols="30" rows="40">{{ data.robots }}</textarea>
    {% js %}
        var editor = CodeMirror.fromTextArea(document.getElementById('robots'), {
        lineNumbers: true,
        matchBrackets: false,
        mode: 'twig',
        indentUnit: 4,
        viewportMargin: 8
        });
    {% endjs %}
{% endblock %}